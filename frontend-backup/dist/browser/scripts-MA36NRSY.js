(function(){"use strict";var n,q=document.createElement("style");q.innerHTML="@keyframes wb-fade-in{0%{opacity:0}to{opacity:.85}}.winbox{position:fixed;left:0;top:0;background:#0050ff;box-shadow:0 14px 28px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.22);transition:width .3s,height .3s,left .3s,top .3s;transition-timing-function:cubic-bezier(.3,1,.3,1);contain:layout size;text-align:left;touch-action:none}.wb-body,.wb-header{position:absolute;left:0}.wb-header{top:0;width:100%;height:35px;line-height:35px;color:#fff;overflow:hidden;z-index:1}.wb-body{top:35px;right:0;bottom:0;overflow:auto;-webkit-overflow-scrolling:touch;overflow-scrolling:touch;will-change:contents;background:#fff;margin-top:0!important;contain:strict;z-index:0}.wb-control *,.wb-icon{background-repeat:no-repeat}.wb-drag{height:100%;padding-left:10px;cursor:move}.wb-title{font-family:Arial,sans-serif;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.wb-icon{display:none;width:20px;height:100%;margin:-1px 8px 0-3px;float:left;background-size:100%;background-position:center}.wb-e,.wb-w{width:10px;top:0}.wb-n,.wb-s{left:0;height:10px;position:absolute}.wb-n{top:-5px;right:0;cursor:n-resize;z-index:2}.wb-e{position:absolute;right:-5px;bottom:0;cursor:w-resize;z-index:2}.wb-s{bottom:-5px;right:0;cursor:n-resize;z-index:2}.wb-nw,.wb-sw,.wb-w{left:-5px}.wb-w{position:absolute;bottom:0;cursor:w-resize;z-index:2}.wb-ne,.wb-nw,.wb-sw{width:15px;height:15px;z-index:2;position:absolute}.wb-nw{top:-5px;cursor:nw-resize}.wb-ne,.wb-sw{cursor:ne-resize}.wb-ne{top:-5px;right:-5px}.wb-se,.wb-sw{bottom:-5px}.wb-se{position:absolute;right:-5px;width:15px;height:15px;cursor:nw-resize;z-index:2}.wb-control{float:right;height:100%;max-width:100%;text-align:center}.wb-control *{display:inline-block;width:30px;height:100%;max-width:100%;background-position:center;cursor:pointer}.no-close .wb-close,.no-full .wb-full,.no-header .wb-header,.no-max .wb-max,.no-min .wb-min,.no-resize .wb-body~div,.wb-body .wb-hide,.wb-show,.winbox.hide,.winbox.min .wb-body>*,.winbox.min .wb-full,.winbox.min .wb-min,.winbox.modal .wb-full,.winbox.modal .wb-max,.winbox.modal .wb-min{display:none}.winbox.max .wb-drag,.winbox.min .wb-drag{cursor:default}.wb-min{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAyIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNOCAwaDdhMSAxIDAgMCAxIDAgMkgxYTEgMSAwIDAgMSAwLTJoN3oiLz48L3N2Zz4=);background-size:14px auto;background-position:center calc(50% + 6px)}.wb-max{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9IiNmZmYiIHZpZXdCb3g9IjAgMCA5NiA5NiI+PHBhdGggZD0iTTIwIDcxLjMxMUMxNS4zNCA2OS42NyAxMiA2NS4yMyAxMiA2MFYyMGMwLTYuNjMgNS4zNy0xMiAxMi0xMmg0MGM1LjIzIDAgOS42NyAzLjM0IDExLjMxMSA4SDI0Yy0yLjIxIDAtNCAxLjc5LTQgNHY1MS4zMTF6Ii8+PHBhdGggZD0iTTkyIDc2VjM2YzAtNi42My01LjM3LTEyLTEyLTEySDQwYy02LjYzIDAtMTIgNS4zNy0xMiAxMnY0MGMwIDYuNjMgNS4zNyAxMiAxMiAxMmg0MGM2LjYzIDAgMTItNS4zNyAxMi0xMnptLTUyIDRjLTIuMjEgMC00LTEuNzktNC00VjM2YzAtMi4yMSAxLjc5LTQgNC00aDQwYzIuMjEgMCA0IDEuNzkgNCA0djQwYzAgMi4yMS0xLjc5IDQtNCA0SDQweiIvPjwvc3ZnPg==);background-size:17px auto}.wb-close{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xIC0xIDE4IDE4Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJtMS42MTMuMjEuMDk0LjA4M0w4IDYuNTg1IDE0LjI5My4yOTNsLjA5NC0uMDgzYTEgMSAwIDAgMSAxLjQwMyAxLjQwM2wtLjA4My4wOTRMOS40MTUgOGw2LjI5MiA2LjI5M2ExIDEgMCAwIDEtMS4zMiAxLjQ5N2wtLjA5NC0uMDgzTDggOS40MTVsLTYuMjkzIDYuMjkyLS4wOTQuMDgzQTEgMSAwIDAgMSAuMjEgMTQuMzg3bC4wODMtLjA5NEw2LjU4NSA4IC4yOTMgMS43MDdBMSAxIDAgMCAxIDEuNjEzLjIxeiIvPjwvc3ZnPg==);background-size:15px auto;background-position:5px center}.wb-full{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2Utd2lkdGg9IjIuNSIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNOCAzSDVhMiAyIDAgMCAwLTIgMnYzbTE4IDBWNWEyIDIgMCAwIDAtMi0yaC0zbTAgMThoM2EyIDIgMCAwIDAgMi0ydi0zTTMgMTZ2M2EyIDIgMCAwIDAgMiAyaDMiLz48L3N2Zz4=);background-size:16px auto}.winbox.max .wb-body~div,.winbox.min .wb-body~div,.winbox.modal .wb-body~div,.winbox.modal .wb-drag,body.wb-lock iframe{pointer-events:none}.winbox.max{box-shadow:none}.winbox.max .wb-body{margin:0!important}.winbox iframe{position:absolute;width:100%;height:100%;border:0}body.wb-lock .winbox{will-change:left,top,width,height;transition:none}.winbox.modal:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:inherit;border-radius:inherit}.winbox.modal:after{content:'';position:absolute;top:-50vh;left:-50vw;right:-50vw;bottom:-50vh;background:#0d1117;animation:wb-fade-in .2s ease-out forwards;z-index:-1}.no-animation{transition:none}.no-shadow{box-shadow:none}.no-header .wb-body{top:0}.no-move:not(.min) .wb-title{pointer-events:none}.wb-body .wb-show{display:revert}";var G=document.getElementsByTagName("head")[0];G.firstChild?G.insertBefore(q,G.firstChild):G.appendChild(q);var ti=document.createElement("div");ti.innerHTML="<div class=wb-header><div class=wb-control><span class=wb-min></span><span class=wb-max></span><span class=wb-full></span><span class=wb-close></span></div><div class=wb-drag><div class=wb-icon></div><div class=wb-title></div></div></div><div class=wb-body></div><div class=wb-n></div><div class=wb-s></div><div class=wb-w></div><div class=wb-e></div><div class=wb-nw></div><div class=wb-ne></div><div class=wb-se></div><div class=wb-sw></div>";function l(i,t,e,o){i&&i.addEventListener(t,e,o||!1)}function Q(i,t){var e=window,o=Y;e&&e.removeEventListener(i,t,o||!1)}function C(i,t){i.stopPropagation(),t&&i.preventDefault()}function d(i,t,e){e=""+e,i["_s_"+t]!==e&&(i.style.setProperty(t,e),i["_s_"+t]=e)}var L=[],g=[],ei={capture:!0,passive:!1},Y={capture:!0,passive:!0},b,li=0,O=10,E,y,si,u,v,X;function N(i,t){if(!(this instanceof N))return new N(i);if(b||di(),i){if(t){var e=i;i=t}if(typeof i=="string")e=i;else{var o=i.id,s=i.index,c=i.root,m=i.template;e=e||i.title;var f=i.icon,T=i.mount,H=i.html,r=i.url,w=i.width,a=i.height,x=i.minwidth,I=i.minheight,p=i.maxwidth,M=i.maxheight,$=i.autosize,A=i.overflow,D=i.min,j=i.max,k=i.hidden,ii=i.modal,R=i.x||(ii?"center":0),V=i.y||(ii?"center":0),S=i.top,B=i.left,P=i.bottom,W=i.right,ri=i.background,Z=i.border,F=i.header,_=i.class,hi=i.oncreate,ci=i.onclose,mi=i.onfocus,wi=i.onblur,ai=i.onmove,gi=i.onresize,bi=i.onfullscreen,fi=i.onmaximize,xi=i.onminimize,vi=i.onrestore,pi=i.onhide,Mi=i.onshow,yi=i.onload}}this.g=(m||ti).cloneNode(!0),this.g.id=this.id=o||"winbox-"+ ++li,this.g.className="winbox"+(_?" "+(typeof _=="string"?_:_.join(" ")):"")+(ii?" modal":""),this.g.winbox=this,this.window=this.g,this.body=this.g.getElementsByClassName("wb-body")[0],this.h=F||35,g.push(this),ri&&this.setBackground(ri),Z?d(this.body,"margin",Z+(isNaN(Z)?"":"px")):Z=0,F&&(t=this.g.getElementsByClassName("wb-header")[0],d(t,"height",F+"px"),d(t,"line-height",F+"px"),d(this.body,"top",F+"px")),e&&this.setTitle(e),f&&this.setIcon(f),T?this.mount(T):H?this.body.innerHTML=H:r&&this.setUrl(r,yi),S=S?h(S,v):0,P=P?h(P,v):0,B=B?h(B,u):0,W=W?h(W,u):0,e=u-B-W,f=v-S-P,p=p?h(p,e):e,M=M?h(M,f):f,x=x?h(x,p):150,I=I?h(I,M):this.h,$?((c||b).appendChild(this.body),w=Math.max(Math.min(this.body.clientWidth+2*Z+1,p),x),a=Math.max(Math.min(this.body.clientHeight+this.h+Z+1,M),I),this.g.appendChild(this.body)):(w=w?h(w,p):Math.max(p/2,x)|0,a=a?h(a,M):Math.max(M/2,I)|0),R=R?h(R,e,w):B,V=V?h(V,f,a):S,this.x=R,this.y=V,this.width=w,this.height=a,this.s=x,this.o=I,this.m=p,this.l=M,this.top=S,this.right=W,this.bottom=P,this.left=B,this.index=s,this.j=A,this.focused=this.hidden=this.full=this.max=this.min=!1,this.onclose=ci,this.onfocus=mi,this.onblur=wi,this.onmove=ai,this.onresize=gi,this.onfullscreen=bi,this.onmaximize=fi,this.onminimize=xi,this.onrestore=vi,this.onhide=pi,this.onshow=Mi,k?this.hide():this.focus(),(s||s===0)&&(this.index=s,d(this.g,"z-index",s),s>O&&(O=s)),j?this.maximize():D?this.minimize():this.resize().move(),ui(this),(c||b).appendChild(this.g),hi&&hi.call(this,i)}N.new=function(i){return new N(i)},N.stack=function(){return g};function h(i,t,e){return typeof i=="string"&&(i==="center"?i=(t-e)/2+.5|0:i==="right"||i==="bottom"?i=t-e:(e=parseFloat(i),i=(""+e!==i&&i.substring((""+e).length))==="%"?t/100*e+.5|0:e)),i}function di(){b=document.body,b[y="requestFullscreen"]||b[y="msRequestFullscreen"]||b[y="webkitRequestFullscreen"]||b[y="mozRequestFullscreen"]||(y=""),si=y&&y.replace("request","exit").replace("mozRequest","mozCancel").replace("Request","Exit"),l(window,"resize",function(){ni(),K()}),l(b,"mousedown",function(){X=!1},!0),l(b,"mousedown",function(){if(!X){var i=g.length;if(i)for(--i;0<=i;i--){var t=g[i];if(t.focused){t.blur();break}}}}),ni()}function ui(i){z(i,"drag"),z(i,"n"),z(i,"s"),z(i,"w"),z(i,"e"),z(i,"nw"),z(i,"ne"),z(i,"se"),z(i,"sw"),l(i.g.getElementsByClassName("wb-min")[0],"click",function(t){C(t),i.min?i.restore().focus():i.minimize()}),l(i.g.getElementsByClassName("wb-max")[0],"click",function(t){C(t),i.max?i.restore().focus():i.maximize().focus()}),y?l(i.g.getElementsByClassName("wb-full")[0],"click",function(t){C(t),i.fullscreen().focus()}):i.addClass("no-full"),l(i.g.getElementsByClassName("wb-close")[0],"click",function(t){C(t),i.close()||(i=null)}),l(i.g,"mousedown",function(){X=!0},!0),l(i.body,"mousedown",function(){i.focus()},!0)}function U(i){L.splice(L.indexOf(i),1),K(),i.removeClass("min"),i.min=!1,i.g.title=""}function K(){for(var i=L.length,t={},e={},o=0,s;o<i;o++)s=L[o],s=s.left+":"+s.top,e[s]?e[s]++:(t[s]=0,e[s]=1);o=0;for(var c,m;o<i;o++)s=L[o],c=s.left+":"+s.top,m=Math.min((u-s.left-s.right)/e[c],250),s.resize(m+1|0,s.h,!0).move(s.left+t[c]*m|0,v-s.bottom-s.h,!0),t[c]++}function z(i,t){function e(r){if(C(r,!0),i.focus(),t==="drag"){if(i.min){i.restore();return}if(!i.g.classList.contains("no-max")){var w=Date.now(),a=w-H;if(H=w,300>a){i.max?i.restore():i.maximize();return}}}i.min||(b.classList.add("wb-lock"),(m=r.touches)&&(m=m[0])?(r=m,l(window,"touchmove",o,Y),l(window,"touchend",s,Y)):(l(window,"mousemove",o,Y),l(window,"mouseup",s,Y)),f=r.pageX,T=r.pageY)}function o(r){C(r),m&&(r=r.touches[0]);var w=r.pageX;r=r.pageY;var a=w-f,x=r-T,I=i.width,p=i.height,M=i.x,$=i.y,A;if(t==="drag"){if(i.g.classList.contains("no-move"))return;i.x+=a,i.y+=x;var D=A=1}else{if(t==="e"||t==="se"||t==="ne"){i.width+=a;var j=1}else(t==="w"||t==="sw"||t==="nw")&&(i.x+=a,i.width-=a,D=j=1);if(t==="s"||t==="se"||t==="sw"){i.height+=x;var k=1}else(t==="n"||t==="ne"||t==="nw")&&(i.y+=x,i.height-=x,A=k=1)}j&&(i.width=Math.max(Math.min(i.width,i.m,u-i.x-i.right),i.s),j=i.width!==I),k&&(i.height=Math.max(Math.min(i.height,i.l,v-i.y-i.bottom),i.o),k=i.height!==p),(j||k)&&i.resize(),D&&(i.max&&(i.x=(w<u/3?i.left:w>u/3*2?u-i.width-i.right:u/2-i.width/2)+a),i.x=Math.max(Math.min(i.x,i.j?u-30:u-i.width-i.right),i.j?30-i.width:i.left),D=i.x!==M),A&&(i.max&&(i.y=i.top+x),i.y=Math.max(Math.min(i.y,i.j?v-i.h:v-i.height-i.bottom),i.top),A=i.y!==$),(D||A)&&(i.max&&i.restore(),i.move()),(j||D)&&(f=w),(k||A)&&(T=r)}function s(r){C(r),b.classList.remove("wb-lock"),m?(Q("touchmove",o),Q("touchend",s)):(Q("mousemove",o),Q("mouseup",s))}var c=i.g.getElementsByClassName("wb-"+t)[0];if(c){var m,f,T,H=0;l(c,"mousedown",e,ei),l(c,"touchstart",e,ei)}}function ni(){var i=document.documentElement;u=i.clientWidth,v=i.clientHeight}n=N.prototype,n.mount=function(i){return this.unmount(),i.i||(i.i=i.parentNode),this.body.textContent="",this.body.appendChild(i),this},n.unmount=function(i){var t=this.body.firstChild;if(t){var e=i||t.i;e&&e.appendChild(t),t.i=i}return this},n.setTitle=function(i){var t=this.g.getElementsByClassName("wb-title")[0];i=this.title=i;var e=t.firstChild;return e?e.nodeValue=i:t.textContent=i,this},n.setIcon=function(i){var t=this.g.getElementsByClassName("wb-icon")[0];return d(t,"background-image","url("+i+")"),d(t,"display","inline-block"),this},n.setBackground=function(i){return d(this.g,"background",i),this},n.setUrl=function(i,t){var e=this.body.firstChild;return e&&e.tagName.toLowerCase()==="iframe"?e.src=i:(this.body.innerHTML='<iframe src="'+i+'"></iframe>',t&&(this.body.firstChild.onload=t)),this},n.focus=function(i){if(i===!1)return this.blur();if(!this.focused){if(i=g.length,1<i)for(var t=1;t<=i;t++){var e=g[i-t];if(e.focused){e.blur(),g.push(g.splice(g.indexOf(this),1)[0]);break}}d(this.g,"z-index",++O),this.index=O,this.addClass("focus"),this.focused=!0,this.onfocus&&this.onfocus()}return this},n.blur=function(i){return i===!1?this.focus():(this.focused&&(this.removeClass("focus"),this.focused=!1,this.onblur&&this.onblur()),this)},n.hide=function(i){if(i===!1)return this.show();if(!this.hidden)return this.onhide&&this.onhide(),this.hidden=!0,this.addClass("hide")},n.show=function(i){if(i===!1)return this.hide();if(this.hidden)return this.onshow&&this.onshow(),this.hidden=!1,this.removeClass("hide")},n.minimize=function(i){return i===!1?this.restore():(E&&J(),this.max&&(this.removeClass("max"),this.max=!1),this.min||(L.push(this),K(),this.g.title=this.title,this.addClass("min"),this.min=!0,this.focused&&(this.blur(),oi()),this.onminimize&&this.onminimize()),this)};function oi(){var i=g.length;if(i)for(--i;0<=i;i--){var t=g[i];if(!t.min){t.focus();break}}}n.restore=function(){return E&&J(),this.min&&(U(this),this.resize().move(),this.onrestore&&this.onrestore()),this.max&&(this.max=!1,this.removeClass("max").resize().move(),this.onrestore&&this.onrestore()),this},n.maximize=function(i){return i===!1?this.restore():(E&&J(),this.min&&U(this),this.max||(this.addClass("max").resize(u-this.left-this.right,v-this.top-this.bottom,!0).move(this.left,this.top,!0),this.max=!0,this.onmaximize&&this.onmaximize()),this)},n.fullscreen=function(i){if(this.min&&(U(this),this.resize().move()),!E||!J())this.body[y](),E=this,this.full=!0,this.onfullscreen&&this.onfullscreen();else if(i===!1)return this.restore();return this};function J(){if(E.full=!1,document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)return document[si](),!0}n.close=function(i){if(this.onclose&&this.onclose(i))return!0;this.min&&U(this),g.splice(g.indexOf(this),1),this.unmount(),this.g.remove(),this.g.textContent="",this.g=this.body=this.g.winbox=null,this.focused&&oi()},n.move=function(i,t,e){return i||i===0?e||(this.x=i?i=h(i,u-this.left-this.right,this.width):0,this.y=t?t=h(t,v-this.top-this.bottom,this.height):0):(i=this.x,t=this.y),d(this.g,"left",i+"px"),d(this.g,"top",t+"px"),this.onmove&&this.onmove(i,t),this},n.resize=function(i,t,e){return i||i===0?e||(this.width=i?i=h(i,this.m):0,this.height=t?t=h(t,this.l):0,i=Math.max(i,this.s),t=Math.max(t,this.o)):(i=this.width,t=this.height),d(this.g,"width",i+"px"),d(this.g,"height",t+"px"),this.onresize&&this.onresize(i,t),this},n.addControl=function(i){var t=i.class,e=i.image,o=i.click;i=i.index;var s=document.createElement("span"),c=this.g.getElementsByClassName("wb-control")[0],m=this;return t&&(s.className=t),e&&d(s,"background-image","url("+e+")"),o&&(s.onclick=function(f){o.call(this,f,m)}),c.insertBefore(s,c.childNodes[i||0]),this},n.removeControl=function(i){return(i=this.g.getElementsByClassName(i)[0])&&i.remove(),this},n.addClass=function(i){return this.g.classList.add(i),this},n.removeClass=function(i){return this.g.classList.remove(i),this},n.toggleClass=function(i){return this.g.classList.contains(i)?this.removeClass(i):this.addClass(i)},window.WinBox=N}).call(this);
